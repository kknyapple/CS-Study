# [Network] HTTPS, HTTPS λ™μ‘ κ³Όμ •

# HTTPSλ€?

ν•μ΄νΌ ν…μ¤νΈ μ „μ†΅ ν”„λ΅ν† μ½ λ³΄μ•(HTTP + **Secure**)μ μ•½μ. μ¦‰, HTTPμ— λ°μ΄ν„° μ•”νΈν™”λ¥Ό μ¶”κ°€ν• κ²ƒ.

HTTPμ™€ λ‹¤λ¥΄κ² **443λ² ν¬νΈ(TCP/IP ν¬νΈ)** λ¥Ό μ‚¬μ©ν•λ‹¤.  
<br/>

# HTTP vs HTTPS

HTTPμ λ¬Έμ μ μ€ λΈλΌμ°μ €λ΅ μ „μ†΅λλ” μ •λ³΄(ν…μ¤νΈ)κ°€ μ•”νΈν™”κ°€ λμ§€ μ•μ•„ λ³΄μ•μƒμ μ„ν—μ΄ μλ‹¤λ” κ²ƒμ΄λ‹¤. λ”°λΌμ„ HTTPSλ” `SSL(λ³΄μ• μ†μΌ“ κ³„μΈµ)`μ„ ν†µν•΄ μ΄λ¥Ό ν•΄κ²°ν–λ‹¤.

`SSL`μ€ μ„λ²„μ™€ λΈλΌμ°μ € μ‚¬μ΄μ— μ•”νΈν™”λ μ—°κ²°μ„ λ§λ“¤ μ μκ² λ„μ™€μ£ΌκΈ° λ•λ¬Έμ— μ„λ²„-λΈλΌμ°μ €κ°€ μ‹ μ©μΉ΄λ“ μ •λ³΄λ‚ λΉ„λ°€λ²νΈμ™€ κ°™μ€ λ―Όκ°ν• μ •λ³΄λ¥Ό μ£Όκ³  λ°›μ„ λ• λ„λ‚ λ‹Ήν•λ” κ²ƒμ„ λ§‰μ•„μ¤€λ‹¤.

κ·Έ μ™Έμ—λ„ `TSL(μ „μ†΅ κ³„μΈµ λ³΄μ•) ν”„λ΅ν† μ½`μ„ ν†µν•΄μ„λ„ λ³΄μ•μ„ μ μ§€ν•λ‹¤.

`TSL`μ€ λ¬΄κ²°μ„±μ„ μ κ³µν•κΈ° λ•λ¬Έμ— λ°μ΄ν„°μ μ†μƒμ„ λ°©μ§€ν•κ³ , μ‚¬μ©μκ°€ μμ‹ μ΄ μλ„ν•λ” μ›Ήμ‚¬μ΄νΈμ™€ ν†µμ‹ ν•κ³  μμμ„ μ…μ¦ν•λ” μΈμ¦ κΈ°λ¥λ„ μ κ³µν•λ‹¤.

### (μ •λ¦¬)

- HTTP ν†µμ‹  μ†μΌ“μ„ SSL/TSL ν”„λ΅ν† μ½λ΅ λ€μ²΄ ν–λ‹¤.
  - μ¦‰, `HTTP-SSL-TCL`μ™€ ν†µμ‹ ν•λ” μ‹μ¤ν…μΌλ΅ μ•”νΈν™”μ™€ μ¦λ…μ„, μ•μ •μ„± λ³΄νΈλ¥Ό μ΄μ©ν•  μ μκ² λμ—λ‹¤.
  - κ³µκ°ν‚¤/κ°μΈν‚¤ μ•”νΈν™”λ¥Ό μ§€μ›ν•μ—¬ λ°μ΄ν„°λ¥Ό λ³΄νΈν•λ‹¤.
- HTTPμ— λΉ„ν•΄ HTTPSλ” μ•”νΈν™” ν†µμ‹ μ„ ν•κΈ° λ•λ¬Έμ— CPUλ‚ λ©”λ¨λ¦¬κ°€ λ§μ΄ ν•„μ”ν•λ‹¤λ” λ‹¨μ μ΄ μλ‹¤.  
  <br/>

# HTTPSμ μ›λ¦¬ - ν•μ΄λΈλ¦¬λ“ μ•”νΈν™” λ°©μ‹

- **μ©μ–΄**
  1. μ•”νΈν™”: μ–΄λ–¤ μ •λ³΄λ¥Ό μ•”νΈν™”λ μ •λ³΄λ΅ λ°”κΎΈλ” κ²ƒ
  2. λ³µνΈν™”: μ•”νΈν™”λ μ •λ³΄λ¥Ό λ‹¤μ‹ μ›λ μ •λ³΄λ΅ λ°”κΎΈλ” κ²ƒ
  3. ν‚¤: μ•”νΈν™”, λ³µνΈν™”ν•  λ• μ“°μ΄λ” λΉ„λ°€λ²νΈ

## λ€μΉ­ ν‚¤ λ°©μ‹μ΄λ€?

: μ•”νΈν™” ν•  λ•μ™€ λ³µνΈν™” ν•  λ• `κ°™μ€ ν‚¤(=λ€μΉ­ν‚¤)λ¥Ό μ‚¬μ©`ν•λ” λ°©μ‹

**(μ¥μ )** λ‹¨μν• κµ¬μ΅°μ΄κΈ° λ•λ¬Έμ— λΉ λ¥΄λ‹¤.

**(λ‹¨μ )** κ³µλ™ ν‚¤λ¥Ό λΉΌμ•—κΈ°λ©΄ λ³µνΈν™”κ°€ κ°€λ¥ν•κΈ° λ•λ¬Έμ— λ³΄μ•μ— μ·¨μ•½ν•λ‹¤.

## λΉ„λ€μΉ­ ν‚¤(=κ³µκ° ν‚¤) λ°©μ‹μ΄λ€?

: μ•”νΈν™” ν•  λ•μ™€ λ³µνΈν™” ν•  λ• `λ‹¤λ¥Έ ν‚¤(=κ³µκ° ν‚¤, κ°μΈ ν‚¤)λ¥Ό μ‚¬μ©`ν•λ” λ°©μ‹

<aside>
π“– `ν΄λΌμ΄μ–ΈνΈ->μ„λ²„`

- μ‚¬μ©μμ λ°μ΄ν„°λ¥Ό κ³µκ° ν‚¤λ΅ μ•”νΈν™”
- μ„λ²„λ΅ μ „μ†΅ (λ°μ΄ν„°λ¥Ό κ°€λ΅μ±„λ„ κ°μΈν‚¤κ°€ μ—†μΌλ―€λ΅ λ³µνΈν™” ν•  μ μ—†μ)
- μ„λ²„μ κ°μΈν‚¤λ¥Ό ν†µν•΄ λ³µνΈν™”ν•μ—¬ μ”μ²­ μ²λ¦¬
</aside>

**(μ¥μ )** κ³µν†µ ν‚¤ λ°©μ‹λ³΄λ‹¤ μ•μ „ν•λ‹¤.

**(λ‹¨μ )** κ³µν†µ ν‚¤ λ°©μ‹λ³΄λ‹¤ λλ¦¬λ©° λ¦¬μ†μ¤ μ†λΉ„κ°€ ν¬λ‹¤.

## λΉ„λ€μΉ­ ν‚¤ λ°©μ‹μ—μ„μ κ³µν†µ ν‚¤μ™€ κ³µκ° ν‚¤λ€?

**κ³µκ°ν‚¤**: λ¨λ‘μ—κ² κ³µκ° κ°€λ¥ν• ν‚¤ (ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν•λ©΄ μ„λ²„κ°€ μ κ³µ)

**κ°μΈ ν‚¤**: κ°μΈμ—κ²λ§ κ³µκ°λ ν‚¤, ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ κµ¬μ΅°μ—μ„λ” μ„λ²„κ°€ κ°€μ§€κ³  μλ” λΉ„κ³µκ°ν‚¤λ¥Ό λ§ν•λ‹¤.

β‡’ ν΄λΌμ΄μ–ΈνΈκ°€ κ³µκ° ν‚¤λ¥Ό ν†µν•΄ μ•”νΈν™”λ¥Ό ν•λ©΄ μ„λ²„λ” κ°μΈ ν‚¤λ΅λ§ λ³µνΈν™”λ¥Ό ν•  μ μλ‹¤.

μ¦‰, κ³µκ° ν‚¤λ¥Ό ν†µν•΄ μ•”νΈν™” ν• λ‚΄μ©μ€ κ³µκ° ν‚¤λ¥Ό ν†µν•΄ λ³µνΈν™”ν•λ” κ²ƒμ΄ λ¶κ°€λ¥ν•κ³ , κ³µκ° ν‚¤μ™€ μμ„ μ΄λ£¨λ” κ°μΈ ν‚¤λ¥Ό μ‚¬μ©ν•΄μ•Όλ§ λ³µνΈν™”κ°€ κ°€λ¥ν•κΈ° λ•λ¬Έμ— λ³΄μ• λ©΄μ—μ„ μ λ¦¬ν•λ‹¤.

## ν•μ΄λΈλ¦¬λ“ μ•”νΈ μ‹μ¤ν…

> HTTPSλ” `λ€μΉ­ ν‚¤ λ°©μ‹`κ³Ό `λΉ„λ€μΉ­ ν‚¤ λ°©μ‹` μ„ νΌν•©ν• ν•μ΄λΈλ¦¬λ“ μ•”νΈ μ‹μ¤ν…μ„ μ‚¬μ©ν•λ‹¤.

β‡’ λ©”μ„Έμ§€μ™€ κ°™μ€ λ°μ΄ν„°λ¥Ό λ€μΉ­ν‚¤λ΅ μ•”νΈν™” ν• λ’¤, μ΄λ• μ‚¬μ©ν• λ€μΉ­ ν‚¤λ” κ³µκ° ν‚¤ λ°©μ‹μΌλ΅ μ•”νΈν™” ν•κ³ , μ΄ λ‹¤μλ¶€ν„°μ ν†µμ‹ μ€ μ΄ κ³µκ° ν‚¤ λ°©μ‹μΌλ΅ μƒμ„±λ ν‚¤λ¥Ό λ€μΉ­ν‚¤λ΅ μ‚¬μ©ν•λ‹¤.

(μ΄λ¬λ©΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ§ μ΄λ¥Ό κ³µμ ν•  μ μκ³ , μ†λ„μ λ¬Έμ λ„ ν•΄κ²°ν•  μ μλ‹¤.)  
<br/>

# HTTPS λ™μ‘ κ³Όμ •

> ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ ‘μ†ν•λ©΄, μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² SSL μΈμ¦μ„ μ •λ³΄λ¥Ό μ „λ‹¬ν•κ³ , ν•΄λ‹Ή μΈμ¦μ„κ°€ ν™•μΈμ΄ λ μ΄ν›„μ— λ‚΄λ¶€μ— μ΅΄μ¬ν•λ” κ³µκ°ν‚¤λ¥Ό ν™μ©ν•΄ `μ„Έμ…ν‚¤` λΌλ” κ²ƒμ„ μƒμ„±ν•κ³ , μ΄λ¥Ό ν™μ©ν•΄ ν†µμ‹ μ„ μ‹μ‘ν•λ‹¤. μ΄λ ‡κ² SSL ν”„λ΅ν† μ½μ„ ν™μ©ν•΄ ν†µμ‹ μ„ μλ¦½ν•λ” κ³Όμ •μ„ `SSL/TSL Handshake` λΌκ³  ν•λ‹¤.

1. **client hello** : ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅ hello ν•λ©΄μ„ `SSL λ²„μ „`, `μ§€μ›λλ” μ•”νΈ μ ν’κµ°`, λ¬΄μ‘μ„λ΅ μƒμ„±ν• `client random`μ„ ν¬ν•¨ν• λ©”μ‹μ§€ μ „μ†΅
2. **server hello**: ν΄λΌμ΄μ–ΈνΈμ hello λ©”μ‹μ§€μ— λ€ν• μ‘λ‹µμΌλ΅ μ„λ²„κ°€ μ„λ²„μ `SSL μΈμ¦μ„`, μ„λ²„μ—μ„ `μ„ νƒν• μ•”νΈ μ ν’κµ°`, μ„λ²„μ—μ„ μƒμ„±ν• λ¬΄μ‘μ„ λ°”μ΄νΈ λ¬Έμμ—΄μΈ `server random`μ„ ν¬ν•¨ν• λ©”μ‹μ§€ μ „μ†΅
3. **verify server certificate**: ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ SSL μΈμ¦μ„λ¥Ό μΈμ¦μ„ λ°ν–‰ κΈ°κ΄€(CA)λ¥Ό ν†µν•΄ κ²€μ¦
4. **client key exchange**: μΈμ¦ ν™•μΈ ν›„, ν΄λΌμ΄μ–ΈνΈλ” λ¬΄μ‘μ„ λ°”μ΄νΈ λ¬Έμμ—΄(`the premaster secret`μ„ κ³µκ°ν‚¤λ΅ μ•”νΈν™” ν•μ—¬ μ „μ†΅ (μ΄ κ³µκ°ν‚¤λ” μ„λ²„μ SSL μΈμ¦μ„μ— ν¬ν•¨λμ–΄ μλ‹¤.)
5. **send client certificate**: μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μΈμ¦μ„λ¥Ό μ”κµ¬ν•λ‹¤λ©΄, μ„λ²„μ μΈμ¦μ„μ™€ κ°™μ€ λ°©μ‹μΌλ΅ μ•”νΈν™”λ¥Ό μ§„ν–‰ν•μ—¬ ν•¨κ» μ „μ†΅
6. **verify client certificate**: μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈλ΅ λ°›μ€ λ¬Έμμ—΄μ„ κ°μΈν‚¤λ¥Ό ν†µν•΄ ν•΄λ…
7. **client β€finishedβ€**: ν΄λΌμ΄μ–ΈνΈκ°€ `client random`, `server random`, `the premaster secret`μ„ ν†µν•΄ λ€μΉ­ν‚¤λ΅ ν™μ©ν•  `μ„Έμ… ν‚¤`λ¥Ό μƒμ„± ν›„, μ„Έμ… ν‚¤λ΅ μ•”νΈν™” λ `"finished"` λ©”μ‹μ§€ μ „μ†΅
8. **server β€finishedβ€**: μ„λ²„κ°€ `client random`, `server random`, `the premaster secret`μ„ ν†µν•΄ λ€μΉ­ν‚¤λ΅ ν™μ©ν•  `μ„Έμ… ν‚¤`λ¥Ό μƒμ„± ν›„, μ„Έμ… ν‚¤λ΅ μ•”νΈν™” λ `"finished"` λ©”μ‹μ§€ μ „μ†΅
9. **exchange messages**: handshake μ™„λ£ ν›„, μ„Έμ… ν‚¤λ¥Ό μ΄μ©ν•΄ λ©”μ„Έμ§€λ¥Ό μ£Όκ³  λ°›μ
10. **end session**: μ„Έμ… μΆ…λ£ ν›„ μ„Έμ… ν‚¤ νκΈ°

---

## μ°Έκ³ 

[http-κ·Έλ¦¬κ³ -httpsμ μ΄ν•΄](https://blog.wishket.com/http-%EA%B7%B8%EB%A6%AC%EA%B3%A0-https%EC%9D%98-%EC%9D%B4%ED%95%B4/)

[[Web] HTTPμ™€ HTTPSμ κ°λ… λ° μ°¨μ΄μ ](https://mangkyu.tistory.com/98)

https://loosie.tistory.com/718#SSL/TLS_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C_(%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C_%EC%95%94%ED%98%B8%ED%99%94_%EC%8B%9C%EC%8A%A4%ED%85%9C)

https://inuplace.tistory.com/1086
