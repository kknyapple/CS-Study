## 쿠키

### 쿠키

- 브라우저에 저장되는 작은 크기의 문자열이다.
- 최대 4KB까지 저장 가능하고 하나의 도메인 당 20개의 값만 가질 수 있다.
- 이름, 값, 유효 시간, 도메인, 요청 경로로 구성되어 있다.

### HTTP

- 비연결성, 무상태성 특징을 가지고 있다.
- 연결을 끊는 순간 클라이언트와 서버의 통신이 끝나며 상태 정보를 유지 하지 않는 특성이다.

### 쿠키 전송 방식

![image](https://github.com/kknyapple/CS-Study/assets/72698829/f902f373-55f9-48cc-8965-76f953400f35)

- 클라이언트가 페이지를 요청한다.
- 서버에서 쿠키를 생성한다.
- HTTP 헤더에 쿠키를 포함 시켜 응답한다.
- 브라우저가 종료되어도 쿠키 만료 기간이 있다면 클라이언트에서 보관하고 있는다.
- 같은 요청을 할  경우 HTTP 헤더에 쿠키를 함께 보낸다.
- 서버에서 쿠키를 읽어 이전 상태 정보를 변경할 필요가 있을 때 쿠키를 업데이트 하여 변경된 쿠키를 HTTP 헤더에 포함 시켜 응답한다.

### 쿠키의 특징

- 주로 서버에서 사용한다.
- 요청 시 헤더에 전송한다.
- 만료 기간을 지정할 수 있다.

### 문제점

- CSRF: 사용자의 권한을 이용한 공격
- XSS: 사용자의 민감한 정보 탈취
- HTTP 요청시 자동으로 모든 쿠키를 계속 서버로 전송해 불필요한 트래픽이 증가한다.

### 쿠키 보안 문제 해결 방안

- XSS: HttpOnly를 추가해 자바스크립트로 접근이 불가하게 한다.
- CSRF: SameSite로 같은 도메인의 요청에만 쿠키를 전송한다.
